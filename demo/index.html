<!DOCTYPE html>
<html lang="ru" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgroScore.AI - Демонстрация</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
        }

        body {
            font-family: var(--font-sans);
            font-feature-settings: "cv02", "cv03", "cv04", "cv11";
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .reveal {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        .animate-mesh {
            animation: mesh 20s infinite ease-in-out;
        }

        @keyframes mesh {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(10deg); }
            100% { transform: scale(1) rotate(0); }
        }

        /* CHATBOT STYLES */
        .chat-window { position: fixed; bottom: 80px; right: 20px; width: 340px; max-height: 400px; background: white; border-radius: 20px; border: 1px solid #ddd; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1); z-index:50;}
        .messages { padding: 10px; flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; }
        .input-area { border-top: 1px solid #eee; padding: 8px; display: flex; }
        .input-area input { flex: 1; padding: 6px 10px; border-radius: 12px; border: 1px solid #ccc; }
        .input-area button { margin-left: 5px; background: #10B981; color: white; border-radius: 12px; padding: 6px 10px; }
        .user-msg { align-self: flex-end; background: #111827; color: white; padding: 6px 10px; border-radius: 12px; max-width: 80%; }
        .bot-msg { align-self: flex-start; background: #F3F4F6; color: #111827; padding: 6px 10px; border-radius: 12px; max-width: 80%; }
    </style>
</head>

<body class="bg-zinc-50 text-zinc-900 selection:bg-emerald-100 selection:text-emerald-900 antialiased overflow-x-hidden relative">

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 px-6 py-6 transition-transform duration-300 bg-white/90 backdrop-blur-sm">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <a href="/" class="group flex items-center gap-2 mix-blend-darken">
                <div class="text-xl font-semibold tracking-tighter text-zinc-900 leading-none">
                    AgroScore<span class="text-emerald-600">.AI</span>
                </div>
            </a>
            <a href="/" class="text-xs font-medium text-zinc-500 hover:text-zinc-900 transition-colors flex items-center gap-1">
                <i data-lucide="arrow-left" class="w-3 h-3"></i>
                На главную
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="relative z-10 w-full min-h-screen flex flex-col items-center pt-32 pb-20 px-6">
        <div class="max-w-5xl w-full">
            <!-- VIDEO -->
            <div class="relative w-full aspect-video rounded-3xl overflow-hidden shadow-2xl border border-zinc-200 bg-zinc-900 mb-20 reveal group">
                <iframe class="w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity duration-500"
                    src="https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=0&controls=1&rel=0&modestbranding=1"
                    title="AgroScore Demo Video" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen>
                </iframe>
            </div>

            <!-- DESCRIPTION -->
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 mb-20">
                <div class="lg:col-span-7 space-y-8 reveal">
                    <h2 class="text-2xl font-semibold tracking-tight text-zinc-900 mb-4">О проекте</h2>
                    <div class="prose prose-zinc prose-sm text-zinc-600 leading-loose">
                        <p>Демо показывает, как наше приложение анализирует финансовые, климатические и производственные данные фермеров и превращает их в скоринговый балл с рекомендациями по кредиту.</p>
                        <p>Это решение помогает банкам снижать риски и делает финансирование сельхозпроизводителей прозрачным и доступным. Система автоматически агрегирует данные из разрозненных источников, создавая единый профиль заемщика.</p>
                    </div>
                </div>

                <!-- TECH STACK -->
                <div class="lg:col-span-5 reveal">
                    <div class="bg-white p-6 rounded-3xl border border-zinc-200 shadow-sm h-full flex flex-col">
                        <h3 class="text-sm font-semibold uppercase tracking-wider text-zinc-400 mb-6">Технологический стек</h3>
                        <div class="space-y-6 flex-grow">
                            <div class="flex items-start gap-4">
                                <div class="mt-1 p-2 bg-zinc-100 rounded-lg text-zinc-600">
                                    <i data-lucide="server" class="w-4 h-4"></i>
                                </div>
                                <div>
                                    <h4 class="text-sm font-medium text-zinc-900">Core Architecture</h4>
                                    <p class="text-xs text-zinc-500 mt-1 mb-2">Проект построен на Python и FastAPI для высокой производительности.</p>
                                    <div class="flex gap-2">
                                        <span class="px-2 py-1 bg-yellow-50 text-yellow-700 rounded text-[10px] font-mono border border-yellow-100">Python</span>
                                        <span class="px-2 py-1 bg-teal-50 text-teal-700 rounded text-[10px] font-mono border border-teal-100">FastAPI</span>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-start gap-4">
                                <div class="mt-1 p-2 bg-zinc-100 rounded-lg text-zinc-600">
                                    <i data-lucide="brain-circuit" class="w-4 h-4"></i>
                                </div>
                                <div>
                                    <h4 class="text-sm font-medium text-zinc-900">AI Моделирование</h4>
                                    <p class="text-xs text-zinc-500 mt-1">Использует AI-модели для прогнозирования урожайности и финансовой устойчивости фермеров.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PROTOTYPE CTA -->
            <div class="reveal">
                <div class="relative overflow-hidden rounded-3xl bg-zinc-900 px-6 py-12 md:px-12 md:py-16 text-center shadow-2xl">
                    <h2 class="text-2xl md:text-3xl font-semibold text-white tracking-tight mb-4">Испытайте систему в действии</h2>
                    <p class="text-zinc-400 max-w-lg mb-8 text-sm md:text-base">Доступ к рабочей версии прототипа. Загрузите данные и получите мгновенный скоринг.</p>
                    <a href="https://appagrocredit.onrender.com/" target="_blank" rel="noopener noreferrer"
                        class="group relative inline-flex items-center gap-2 bg-white text-zinc-900 text-sm font-semibold px-8 py-4 rounded-full hover:bg-emerald-50 transition-all hover:scale-[1.02] shadow-lg hover:shadow-emerald-500/20 active:scale-[0.98]">
                        <span>Перейти к прототипу</span>
                        <i data-lucide="external-link" class="w-4 h-4 text-zinc-400 group-hover:text-emerald-600 transition-colors"></i>
                    </a>
                </div>
            </div>
        </div>
    </main>

    <!-- CHATBOT WIDGET -->
    <div class="chat-window" id="chat-window">
        <div class="messages" id="messages">
            <div class="bot-msg">Здравствуйте! Я AgroBot, могу ответить на вопросы по проекту AgroScore.AI.</div>
        </div>
        <form class="input-area" id="chat-form">
            <input type="text" id="chat-input" placeholder="Задайте вопрос..." required />
            <button type="submit">Отправить</button>
        </form>
    </div>

    <script>
        lucide.createIcons();

        // Reveal animation
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) entry.target.classList.add('active');
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

        // Chatbot logic
        const form = document.getElementById("chat-form");
        const input = document.getElementById("chat-input");
        const messages = document.getElementById("messages");

        form.addEventListener("submit", async (e) => {
            e.preventDefault();
            const text = input.value;
            addMessage("user", text);
            input.value = "";
            const reply = await sendToAI(text);
            addMessage("bot", reply);
        });

        function addMessage(sender, text) {
            const div = document.createElement("div");
            div.className = sender === "user" ? "user-msg" : "bot-msg";
            div.textContent = text;
            messages.appendChild(div);
            messages.scrollTop = messages.scrollHeight;
        }

        async function sendToAI(message) {
            try {
                const res = await fetch("http://localhost:3000/chat", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ message })
                });
                const data = await res.json();
                return data.reply;
            } catch (err) {
                console.error(err);
                return "Ошибка соединения с AI";
            }
        }
    </script>
</body>
</html>
